@inherits LayoutComponentBase

@inject AuthState AuthState
@inject NavigationManager Nav

<PageTitle>Cardentis</PageTitle>

<div class="game-layout">

    <header class="game-header">
        <div class="game-title">CARDENTIS</div>

        @if (AuthState.IsAuthenticated)
        {
            <button class="logout-btn" @onclick="Logout">
                Wyloguj
            </button>
        }
    </header>

    <main class="game-content">
        @Body
    </main>

    @if (AuthState.IsAuthenticated && !IsBattleGame)
    {
        <nav class="bottom-nav">
            <NavLink href="/profile" class="nav-item">
                🧍
                <span>Profil</span>
            </NavLink>

            <NavLink href="/battle/select" class="nav-item">
                ⚔️
                <span>Walka</span>
            </NavLink>
        </nav>
    }
</div>

@code {
    private bool IsBattleGame => Nav.Uri.Contains("/battle/game");

    private void Logout()
    {
        AuthState.Logout();
        Nav.NavigateTo("/login", true);
    }
}
